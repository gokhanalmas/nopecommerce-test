/*
* Copyright 2013 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

$(document).ready(function () { var a = '<div class="quick-view-button"><a>' + GetQuickViewButtonText() + "</a></div>", b = GetProductSelector(); "" != b && ($(document).on({ mouseenter: function () { var c = $(this).parents(".quickViewWindow"); if (!(void 0 != c && 0 < c.length)) { $(this).css("position", "relative"); $(this).find(".picture").before(a); if (c = $(this).find(".picture a")) { var c = c.clone(), b = c.find("img"); b && (b.remove(), c.addClass("buttonOverlay"), $(this).find(".picture").before(c)) } var d = this; $(".quick-view-button").hide().fadeIn(300); $(".buttonOverlay").hide().fadeIn(300); $(".quick-view-button").click(function () { var a = $(d); void 0 != a && RetrieveQuickViewData(a) }) } }, mouseleave: function () { $(".quick-view-button").remove(); $("a.buttonOverlay").remove() } }, b), $(document).on("nopAjaxCartProductAddedToCartEvent", function () { var a = $(".quickViewWindow").data("kendoWindow"); void 0 == a || "" == a.content() || a.close() }), AddQuickViewWindowDialog()) }); function AddQuickViewWindowDialog() { var a = $("body"); if (0 < a.length) { a.prepend('<div class="quickViewWindow"></div>'); var a = GetIsQuickViewPopupDraggable(), b = GetIsQuickViewPopupOverlayEnabled(); $(".quickViewWindow").kendoWindow({ minHeight: "330px", minWidth: "660px", draggable: a, resizable: !1, modal: b, actions: ["Close"], animation: !1, visible: !1, close: function () { $(".quickViewWindow").html($("").html()) } }).data("kendoWindow").wrapper.addClass("quickView") } } function ShowQuickViewWindow() { var a = $(".quickViewWindow").data("kendoWindow"), b = $("<div class='k-loading-mask'><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("700px").height("360px"); a.content(b); a.center(); a.open() } function ShowQuickView(a) { $(".quickViewWindow").data("kendoWindow").content(a) } function RetrieveQuickViewData(a) { a = GetProductId(a); if (0 != a) { var b = GetRetrieveQuickViewDataUrl(); "" != b && $.ajax({ beforeSend: function () { ShowQuickViewWindow() }, cache: !1, type: "POST", data: $.toJSON({ productID: a }), contentType: "application/json; charset=utf-8", url: b, success: function (a) { ShowQuickView(a); $(".cloud-zoom, .cloud-zoom-gallery").CloudZoom(); $("#accordion").accordion({ collapsible: !0, icons: { header: "ui-icon-circle-arrow-e", activeHeader: "ui-icon-circle-arrow-s" }, autoHeight: !1 }); $.event.trigger({ type: "nopQuickViewDataShownEvent" }) }, error: function () { alert("Loading the page failed."); HideProductPanelAjaxBusy() } }) } } function GetProductSelector() { var a = $(".quickViewData").attr("data-productSelector"); return void 0 != a ? a : "" } function GetProductId(a) { a = $(a).attr("data-productid"); return void 0 != a ? a : 0 } function GetRetrieveQuickViewDataUrl() { var a = $(".quickViewData").attr("data-retrieveQuickViewUrl"); return void 0 != a ? a : "" } function GetQuickViewButtonText() { var a = $(".quickViewData").attr("data-quickViewButtonText"); return void 0 != a ? a : "" } function GetIsQuickViewPopupDraggable() { var a = $(".quickViewData").attr("data-isQuickViewPopupDraggable"); return void 0 != a && "True" == a ? !0 : !1 } function GetIsQuickViewPopupOverlayEnabled() { var a = $(".quickViewData").attr("data-enableQuickViewPopupOverlay"); return void 0 != a && "True" == a ? !0 : !1 };